<!DOCTYPE html>
<html>
    <head>
        <!--
         **
         * Auther:      掌心
         * Contact:     http://www.zhanxin.info
         * Create:      2013.08.10
         * Theme Name:  Kunka
         * Authorize:   BY-NC-SA
         **
        -->
        <meta charset="utf-8">
        <title>Jekyll语法简单笔记 - 詹昌文</title>
        <!-- meta -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="generator" content="Jekyll" />
        <meta name="author" content="zhanchangwen" />
        <meta name="description" content="做最好的自己" />
        <meta name="keywords" content="" />
        <!-- atom -->
        <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/blog/feed.xml" />
        <link rel="shortcut icon" href="http://tb.himg.baidu.com/sys/portrait/item/15cf7707?t=1422534652" type="image/x-icon" />
        <!-- font-awesome -->
        <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Spirax' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/blog/themes/kunka/css/syntax.css">
        <link rel="stylesheet" href="/blog/themes/kunka/css/main.css">
        
    </head>
    <body>
        <div class="head fn-clear">
            <div class="header">
                <h1 class="logo">
                    <a href="/blog/"><i class="icon-anchor"></i></a>
                </h1>
                <nav class="nav">
                    <ul>
                        
                        
                        
                        <li class="nav-item ">
                            <a href="/blog/index.html">
                                首页
                            </a>
                            
                        </li>
                        
                        
                        
                        <li class="nav-item ">
                            <a href="/blog/navigations/categories.html">
                                分类目录
                            </a>
                            
                        </li>
                        
                        
                        
                        <li class="nav-item ">
                            <a href="/blog/navigations/archives.html">
                                文章归档
                            </a>
                            
                        </li>
                        
                        
                        
                        <li class="nav-item ">
                            <a href="/blog/navigations/contact.html">
                                联系我
                            </a>
                            
                        </li>
                        
                        
                        
                        <li class="nav-item ">
                            <a href="/blog/navigations/links.html">
                                友情链接
                            </a>
                            
                        </li>
                        
                    </ul>
                </nav>
                <div class="follow">
                    
                    <a href="/feed.xml" target="_blank"><i class="icon-rss"></i></a>
                    
                    <a href="http://weibo.com/u/5093788277" target="_blank"><i class="icon-weibo"></i></a>
                    
                    <a href="http://www.renren.com/288179795" target="_blank"><i class="icon-renren"></i></a>
                    
                    <a href="https://github.com/zhanchangwen" target="_blank"><i class="icon-github-alt"></i></a>
                    
                    <a href="http://twitter.com" target="_blank"><i class="icon-twitter"></i></a>
                    
                    <a href="http://google.com" target="_blank"><i class="icon-google-plus"></i></a>
                    
                </div>
            </div>
        </div>
        <div class="contain fn-clear">
            <div class="container fn-clear">
                <div class="main">
                    
    <div class="article article-post">
    <h2 class="title">Jekyll语法简单笔记</h2>
    <div class="info">
        <span class="info-title"><i class="icon-calendar"></i> Published: </span>
        <span class="info-date">08 Oct 2015</span>
        <span class="info-title"><i class="icon-folder-open"></i> Category: </span>
        <span class="info-link"><a href="/blog/navigations/categories.html#-ref" ></a></span>
    </div>
    <h1>前言</h1>

<p>如果你只想快速搭建一个 github 的静态网站, 而暂时没有时间来研究 jekyll 语法的话,建议直接 fork 我的这个</p>

<p>当然,阅读一下之前我记录的一些笔记也可以增长一些知识.</p>

<ul>
<li><a href="http://github.tiankonguse.com/blog/2014/09/26/jekyll-base-record/">Jekyll</a> <a href="http://github.tiankonguse.com/blog/2014/09/26/jekyll-base-record/">模板</a> <a href="http://github.tiankonguse.com/blog/2014/09/26/jekyll-base-record/">简单语法</a> <a href="http://github.tiankonguse.com/blog/2014/09/26/jekyll-base-record/">笔记</a> 只介绍了最最基本的语法</li>
<li><a href="http://github.tiankonguse.com/blog/2014/07/10/make-github-website/">在github上制作一个静态网站</a> 只介绍了最简单的 github 操作.</li>
</ul>

<p>不过,现在我要记录一个比较完整的语法来建立一个功能比较健全记录型博客.</p>

<p>具体官方文档地址请参考 <a href="http://jekyllrb.com/docs/home/">官方文档</a>.
这里只介绍关于 jekyll 的语法,不介绍其他内容.</p>

<h1>开始</h1>

<p>Jekyll 是什么?</p>

<p>jekyll 是一个静态网站生成器.
jekyll 通过 标记语言 <a href="http://daringfireball.net/projects/markdown/">markdown</a> 或 <a href="http://redcloth.org/textile">textile</a> 和 模板引擎 <a href="https://github.com/Shopify/liquid/wiki">liquid</a> 转换生成网页.
github 为我们提供了这个一个地方, 可以使用 jekyll 做一个我们自己的网站.</p>

<p>这里不介绍怎么在本地安装使用 jekyll, 如果你想在本地使用,请参考官方文档的 <a href="http://jekyllrb.com/docs/installation/">安装教程</a> 和 <a href="http://jekyllrb.com/docs/usage/">使用教程</a>.
不过这里可以透漏一下, jekyll 依赖于 <a href="http://www.ruby-lang.org/en/downloads/">ruby</a> .</p>

<h1>配置</h1>

<p>注意,配置不用使用 tab . 否则可能会忽略那条命令.</p>

<h1>文件介绍</h1>

<p>_config.yml</p>

<p>jekyll 的全局配置在 _config.yml 文件中配置.
比如网站的名字, 网站的域名, 网站的链接格式等等.</p>

<p>_includes</p>

<p>对于网站的头部, 底部, 侧栏等公共部分, 为了维护方便, 我们可能想提取出来单独编写, 然后使用的时候包含进去即可.</p>

<p>这时我们可以把那些公共部分放在这个目录下.</p>

<p>使用时只需要引入即可.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ % include filename % }
</code></pre></div>
<p>_layouts</p>

<p>对于网站的布局,我们一般会写成模板的形式,这样对于写实质性的内容时,比如文章,只需要专心写文章的内容, 然后加个标签指定用哪个模板即可. 对于内容,指定模板了模板后,我们可以称内容是模板的儿子.</p>

<p>为什么这样说呢? 因为这个模板时可以多层嵌套的, 内容实际上模板,只不过是叶子节点而已.</p>

<p>在模板中, 引入儿子的内容.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { content } }
</code></pre></div>
<p>在儿子中,指定父节点模板</p>

<blockquote>
<p>注意,必须在子节点的顶部.</p>
</blockquote>
<div class="highlight"><pre><code class="language-text" data-lang="text">---
layout: post
---
</code></pre></div>
<p>_posts</p>

<p>写的内容,比如博客,常放在这里面, 而且一般作为叶子节点.</p>

<p>_data</p>

<p>也用于配置一些全局变量,不过数据比较多,所以放在这里。</p>

<p>比如这个网站如果是多人开发, 我们通常会在这里面定义一个 members.yml 文件.</p>

<p>文件内容为</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">- name: 袁小康
  github: tiankonguse
  oldnick : shen1000
  nick : skyyuan
</code></pre></div>
<p>然后在模板中我们就可以通过下面语法使用这些数据了.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">site.data.members
</code></pre></div>
<p>_site</p>

<p>jekyll 生成网站输出的地方, 一般需要在 .gitignore 中屏蔽掉这个目录.</p>

<p>index.html</p>

<p>主页文件, 后缀有时也用 index.md 等.</p>

<p>这个需要根据自己的需要来写, 因为不同的格式之间在某些情况下还是有一些细微的差别的.</p>

<p>静态资源</p>

<p>对于其他静态资源, 可以直接放在根目录或任何其他目录, 然后路径和平常的网站一样, 按路径来找链接中的文件.</p>

<h1>配置全局变量</h1>

<p>虽然全局变量都有自己的默认配置, 但是我们往往会手动配置为自己心中最好的效果.</p>

<p>源代码的位置
这个一般不配置, 默认即可.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">source: DIR
</code></pre></div>
<p>当然编译的时候也可以指定,但是使用 github 我们是不能指定参数的.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">-s, --source DIR
</code></pre></div>
<h1>输出网站位置</h1>

<p>这个一般也默认.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># 编译参数 -d, --destination DIR
destination: DIR #配置语法
</code></pre></div>
<h1>Safe开关</h1>

<p>官方文档上就一句话.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">Disable custom plugins, and ignore symbolic links.
</code></pre></div>
<p>大概意思是禁用常用的插件,忽略符号链接.</p>

<h1>编译参数  --safe</h1>

<p>safe: BOOL
忽略文件
这个很有用, 有时候你写了一个文件, 里面的一个东西可能会被 jekyll 处理, 但是你不想让 jekyll 处理的话, 就使用这个语法忽略那些文件吧.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">exclude: [DIR, FILE, ...]
</code></pre></div>
<h1>强制处理文件</h1>

<p>有时候我们的一些文件的名字由于不在 jekyll 处理的文件名字范围内,这时候就需要强制处理这些文件了.
比如 .htaccess 文件.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">include: [DIR, FILE, ...]
</code></pre></div>
<h1>时区</h1>

<p>我们模板中经常会对时间进行转换,这个时候如果至指定时区的话,可能得到的时间会和我们想要的时间错几个小时.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># timezone: Asia/Shanghai
timezone: TIMEZONE
</code></pre></div>
<h1>编码</h1>

<p>大家都是程序员,就不用多说了.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># encoding : utf-8
encoding: ENCODING
</code></pre></div>
<h1>模板语法</h1>

<p>模板语法实际上分两部分, 一部分是头部定义,另一部分是语法.</p>

<h2>头部定义</h2>

<hr>

<p>头部定义主要用于指定模板(layout)和定义一些变量, 比如 标题(title), 描述(description), 分类(category/categories), tags, 是否发布(published), 自定义变量.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">---
layout:     post
title:      title
category: blog
description: description
published: true # default true
---
</code></pre></div>
<h2>模板语法</h2>

<hr>

<h3>使用变量</h3>

<p>所有的变量是都一个树节点, 比如模板中定义的头部变量,需要使用下面的语法获得</p>

<p>page.title
page 是当前页面的根节点.</p>

<p>其中全局根结点有</p>

<ul>
<li>site _config.yml 中配置的信息</li>
<li>page 页面的配置信息</li>
<li>content 模板中,用于引入子节点的内容</li>
<li>paginator 分页信息</li>
</ul>

<h3>site 下的变量</h3>

<ul>
<li>site.time 运行 jekyll 的时间</li>
<li>site.pages 所有页面</li>
<li>site.posts 所有文章</li>
<li>site.related_posts 类似的10篇文章,默认最新的10篇文章,指定lsi为相似的文章</li>
<li>site.static<em>files 没有被 jekyll 处理的文章,有属性 path, modified</em>time 和 extname.</li>
<li>site.html_pages 所有的 html 页面</li>
<li>site.collections 新功能,没使用过</li>
<li>site.data _data 目录下的数据</li>
<li>site.documents 所有 collections 里面的文档</li>
<li>site.categories 所有的 categorie</li>
<li>site.tags 所有的 tag</li>
<li>site.[CONFIGURATION_DATA] 自定义变量
### page 下的变量 ###</li>
<li>page.content 页面的内容</li>
<li>page.title 标题</li>
<li>page.excerpt 摘要</li>
<li>page.url 链接</li>
<li>page.date 时间</li>
<li>page.id 唯一标示</li>
<li>page.categories 分类</li>
<li>page.tags 标签</li>
<li>page.path 源代码位置</li>
<li>page.next 下一篇文章</li>
<li>page.previous 上一篇文章</li>
<li>paginator 下的变量</li>
<li>paginator.per_page 每一页的数量</li>
<li>paginator.posts 这一页的数量</li>
<li>paginator.total_posts 所有文章的数量</li>
<li>paginator.total_pages 总的页数</li>
<li>paginator.page 当前页数</li>
<li>paginator.previous_page 上一页的页数</li>
<li>paginator.previous<em>page</em>path 上一页的路径</li>
<li>paginator.next_page 下一页的页数</li>
<li><p>paginator.next<em>page</em>path 下一页的路径</p>

<h3>字符转义</h3>

<p>有时候想输出 { 了,怎么办,使用 \ 转义即可.</p>

<p>{ =&gt; {</p>

<h3>输出变量</h3>

<p>输出变量直接使用两个大括号括起来即可.</p>

<p>{ { page.title } }</p>

<h3>循环</h3>

<p>和平常的解释性语言很想.</p>

<p>{ % for post in site.posts % }
    <a href="http://blog/2014/11/10/jekyll-study/{ { post.url } }">{ { post.title } }</a>
{ % endfor % }</p></li>
</ul>

<h3>自动生成摘要</h3>

<p>{ % for post in site.posts % }
     { { post.url } } { { post.title } }
      { { post.excerpt | remove: &#39;test&#39; } }
  { % endfor % }</p>

<h3>删除指定文本</h3>

<p>remove 可以删除变量中的指定内容</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { post.url | remove: &#39;http&#39; } }
</code></pre></div>
<h3>删除 html 标签</h3>

<p>这个在摘要中很有用.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { post.excerpt | strip_html } }
</code></pre></div>
<h3>代码高亮</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ % highlight ruby linenos % }
\# some ruby code
{ % endhighlight % }
</code></pre></div>
<h3>数组的大小</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { array | size } }
</code></pre></div>
<h3>赋值</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ % assign index = 1 % }
</code></pre></div>
<h3>格式化时间</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { site.time | date_to_xmlschema } } 2008-11-07T13:07:54-08:00
{ { site.time | date_to_rfc822 } } Mon, 07 Nov 2008 13:07:54 -0800
{ { site.time | date_to_string } } 07 Nov 2008
{ { site.time | date_to_long_string } } 07 November 2008
</code></pre></div>
<h3>搜索指定key</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Select all the objects in an array where the key has the given value.
{ { site.members | where:&quot;graduation_year&quot;,&quot;2014&quot; } } 
</code></pre></div>
<h3>排序</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { site.pages | sort: &#39;title&#39;, &#39;last&#39; } }
to json
{ { site.data.projects | jsonify } }
</code></pre></div>
<h3>序列化</h3>

<p>把一个对象变成一个字符串</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { page.tags | array_to_sentence_string } }
</code></pre></div>
<h3>单词的个数</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ { page.content | number_of_words } }
</code></pre></div>
<h3>指定个数</h3>

<p>得到数组指定范围的结果集</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">{ % for post in site.posts limit:20 % }
</code></pre></div>
<h3>内容名字规范</h3>

<p>对于博客,名字必须是 YEAR-MONTH-DAY-title.MARKUP 的格式.</p>

<p>比如</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">-11-06-memcached-code.md
-11-06-memcached-lib.md
-11-06-sphinx-config-and-use.md
-11-07-memcached-hash-table.md
-11-07-memcached-string-hash.md
</code></pre></div>
<p>转自：<a href="http://ju.outofmemory.cn/entry/98471">http://ju.outofmemory.cn/entry/98471</a></p>

    <nav class="article-previous fn-clear">
        
        <a class="prev" href="/blog//technology/2015/10/08/java-db.html" rel="bookmark">&laquo;&nbsp;JAVA数据库操作</a>
        
        
        <a class="next" href="/blog//java-study/2015/10/09/java-net.html" rel="bookmark">网络编程技术&nbsp;&raquo;</a>
        
    </nav>
    <div class="comment">
        
            
        
    </div>
</div>


                    
                        <div id="disqus_thread"></div>
 <script type="text/javascript">
     /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
     var disqus_shortname = 'zhanchangwen'; // required: replace example with your forum shortname

     /* * * DON'T EDIT BELOW THIS LINE * * */
     (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
 </script>
 <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

                    
                </div>
                <div class="aside">
                    <div class="aside-contact">
                        <h4 class="title">About me</h4>
                        <div class="det fn-clear">
                            <div class="det-image">
                                <img src="http://tb.himg.baidu.com/sys/portrait/item/15cf7707?t=1422534652" />
                            </div>
                            <div class="det-text">
                                <p>我是「詹昌文」，我要做最好的自己。</p>
                            </div>
                        </div>
                    </div>

                    <div class="aside-item">
                        <h4 class="title">Recent Posts</h4>
                        <ul class="list">
                            
                                <li><a href="/blog/2015/11/16/to-be-mature.html" title="To Be Mature" rel="bookmark">To Be Mature</a></li>
                            
                                <li><a href="/blog/2015/11/13/js-singleton.html" title="Js Singleton" rel="bookmark">Js Singleton</a></li>
                            
                                <li><a href="/blog/technique/2015/11/07/array-texture.html" title="通过数组生成纹理" rel="bookmark">通过数组生成纹理</a></li>
                            
                                <li><a href="/blog/webgl/2015/11/06/renderToTexture.html" title="渲染到纹理" rel="bookmark">渲染到纹理</a></li>
                            
                                <li><a href="/blog/git/2015/11/06/git-manual.html" title="git教程-远程仓库的基本使用" rel="bookmark">git教程-远程仓库的基本使用</a></li>
                            
                                <li><a href="/blog/html/2015/11/06/encoding.html" title="中文乱码问题" rel="bookmark">中文乱码问题</a></li>
                            
                        </ul>
                    </div>

                    <div class="aside-item">
                        <h4 class="title">Links</h4>
                        <ul class="list">
                            
                                
                                    
                                    <li><a href="http://www.zhanxin.info" title="掌心" target="_blank">掌心</a></li>
                                    
                                    <li><a href="http://jekyllrb.com" title="Jekyll" target="_blank">Jekyll</a></li>
                                    
                                    <li><a href="http://www.zhanxin.info/themes.html" title="Jekyll Theme" target="_blank">Jekyll Theme</a></li>
                                    
                                
                            
                                
                            
                        </ul>
                    </div>

                </div>
            </div>
        </div>
        <div class="foot">
            <div class="footer">
                <p>Copyright 2013. All rights reserved. Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>, Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin.info</a>.</p>
            </div>
        </div>
        <script type="text/javascript" src="https://lib.sinaapp.com/js/jquery/1.8.3/jquery.min.js"></script>
        
    </body>
</html>
